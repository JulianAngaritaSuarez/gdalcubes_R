<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Data cube views define the shape of a cube, i.e., the spatiotemporal extent, resolution, and spatial reference system (srs).
They are used to access image collections as on-demand data cubes. The data cube will filter images based on the view's
extent, read image data at the defined resolution, and warp / reproject images to the target srs automatically."><title>Create or update a spatiotemporal data cube view — cube_view • gdalcubes</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create or update a spatiotemporal data cube view — cube_view"><meta property="og:description" content="Data cube views define the shape of a cube, i.e., the spatiotemporal extent, resolution, and spatial reference system (srs).
They are used to access image collections as on-demand data cubes. The data cube will filter images based on the view's
extent, read image data at the defined resolution, and warp / reproject images to the target srs automatically."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gdalcubes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gc01_MODIS.html">1. Creating data cubes from local MODIS imagery</a>
    <a class="dropdown-item" href="../articles/gc02_AWS_Sentinel2.html">2. Data cubes from Sentinel-2 data in the cloud</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/appelmar/gdalcubes_R/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create or update a spatiotemporal data cube view</h1>
      <small class="dont-index">Source: <a href="https://github.com/appelmar/gdalcubes_R/blob/HEAD/R/view.R" class="external-link"><code>R/view.R</code></a></small>
      <div class="d-none name"><code>cube_view.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Data cube views define the shape of a cube, i.e., the spatiotemporal extent, resolution, and spatial reference system (srs).
They are used to access image collections as on-demand data cubes. The data cube will filter images based on the view's
extent, read image data at the defined resolution, and warp / reproject images to the target srs automatically.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">cube_view</span><span class="op">(</span>
  <span class="va">view</span>,
  <span class="va">extent</span>,
  <span class="va">srs</span>,
  <span class="va">nx</span>,
  <span class="va">ny</span>,
  <span class="va">nt</span>,
  <span class="va">dx</span>,
  <span class="va">dy</span>,
  <span class="va">dt</span>,
  <span class="va">aggregation</span>,
  <span class="va">resampling</span>,
  keep.asp <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>view</dt>
<dd><p>if provided, update this cube_view object instead of creating a new data cube view where fields that are already set will be overwritten</p></dd>
<dt>extent</dt>
<dd><p>spatioptemporal extent as a list e.g. from <code><a href="extent.html">extent</a></code> or an image collection object, see Details</p></dd>
<dt>srs</dt>
<dd><p>target spatial reference system as a string; can be a proj4 definition, WKT, or in the form "EPSG:XXXX"</p></dd>
<dt>nx</dt>
<dd><p>number of pixels in x-direction (longitude / easting)</p></dd>
<dt>ny</dt>
<dd><p>number of pixels in y-direction (latitude / northing)</p></dd>
<dt>nt</dt>
<dd><p>number of pixels in t-direction</p></dd>
<dt>dx</dt>
<dd><p>size of pixels in x-direction (longitude / easting)</p></dd>
<dt>dy</dt>
<dd><p>size of pixels in y-direction (latitude / northing)</p></dd>
<dt>dt</dt>
<dd><p>size of pixels in time-direction, expressed as ISO8601 period string (only 1 number and unit is allowed) such as "P16D"</p></dd>
<dt>aggregation</dt>
<dd><p>aggregation method as string, defining how to deal with pixels containing data from multiple images, can be "min", "max", "mean", "median", or "first"</p></dd>
<dt>resampling</dt>
<dd><p>resampling method used in gdalwarp when images are read, can be "near", "bilinear", "bicubic" or others as supported by gdalwarp (see <a href="https://gdal.org/programs/gdalwarp.html" class="external-link">https://gdal.org/programs/gdalwarp.html</a>)</p></dd>
<dt>keep.asp</dt>
<dd><p>if TRUE, derive ny or dy automatically from nx or dx (or vice versa) based on the aspect ratio of the spatial extent</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with data cube view properties</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>extent</code> argument expects a simple list with elementes <code>left</code>, <code>right</code>, <code>bottom</code>, <code>top</code>, <code>t0</code> (start date/time), <code>t1</code> (end date/time) or an image collection object.
In the latter case, the <code><a href="extent.html">extent</a></code> function is automatically called on the image collection object to get the full spatiotemporal extent of the collection. In the former case, datetimes 
are expressed as ISO8601 datetime strings.</p>
<p>The function can be used in two different ways. First, it can create data cube views from scratch by defining the extent, the spatial reference system, and for each dimension either the cell size (dx, dy, dt) or the total number of cells (nx, ny, nt).
Second, the function can update an existing data cube view by overwriting specific fields. In this case, the extent or some elements of the extent may be missing.</p>
<p>In some cases, the extent of the view is automatically extended if the provided resolution would end within a pixel. For example,
if the spatial extent covers an area of 1km x 1km and dx = dy = 300m, the extent would be enlarged to 1.2 km x 1.2km. The alignment will be reported to the user in 
a diagnostic message.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"> <span class="va">L8_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"L8NY18"</span>, package <span class="op">=</span> <span class="st">"gdalcubes"</span><span class="op">)</span>,</span>
<span class="r-in">                        <span class="st">".TIF"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"> <span class="va">L8.col</span> <span class="op">=</span> <span class="fu"><a href="create_image_collection.html">create_image_collection</a></span><span class="op">(</span><span class="va">L8_files</span>, <span class="st">"L8_L1TP"</span><span class="op">)</span></span>
<span class="r-in"> </span>
<span class="r-in"> <span class="co"># 1. Create a new data cube view specification</span></span>
<span class="r-in"> <span class="va">v</span> <span class="op">=</span> <span class="fu">cube_view</span><span class="op">(</span>extent<span class="op">=</span><span class="fu"><a href="extent.html">extent</a></span><span class="op">(</span><span class="va">L8.col</span>,<span class="st">"EPSG:4326"</span><span class="op">)</span>, srs<span class="op">=</span><span class="st">"EPSG:4326"</span>, dt<span class="op">=</span><span class="st">"P1M"</span>, </span>
<span class="r-in">           nx<span class="op">=</span><span class="fl">1000</span>, ny<span class="op">=</span><span class="fl">500</span>, aggregation <span class="op">=</span> <span class="st">"mean"</span>, resampling<span class="op">=</span><span class="st">"bilinear"</span><span class="op">)</span></span>
<span class="r-in"> <span class="va">v</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A data cube view object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimensions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          low      high count  pixel_size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> t    2018-01   2018-12    12         P1M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y  39.249912 42.815283   500 0.007130742</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x -76.287075 -71.91114  1000 0.004375935</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SRS: "EPSG:4326"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Temporal aggregation method: "mean"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial resampling method: "bilinear"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"> <span class="co"># 2. overwrite parts of an existing data cube view</span></span>
<span class="r-in"> <span class="va">vnew</span> <span class="op">=</span> <span class="fu">cube_view</span><span class="op">(</span><span class="va">v</span>, dt<span class="op">=</span><span class="st">"P1M"</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Marius Appel.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

