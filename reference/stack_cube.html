<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a data cube from a set of images with the same spatial extent and spatial reference system — stack_cube • gdalcubes</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a data cube from a set of images with the same spatial extent and spatial reference system — stack_cube"><meta property="og:description" content="Create a spatiotemporal data cube directly from images with identical spatial extent and spatial reference system, similar
to a raster stack with an additional dimension supporting both, time and multiple bands / variables."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gdalcubes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/gc01_MODIS.html">1. Creating data cubes from local MODIS imagery</a>
    </li>
    <li>
      <a href="../articles/gc02_AWS_Sentinel2.html">2. Data cubes from Sentinel-2 data in the cloud</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/appelmar/gdalcubes_R/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a data cube from a set of images with the same spatial extent and spatial reference system</h1>
    <small class="dont-index">Source: <a href="https://github.com/appelmar/gdalcubes_R/blob/HEAD/R/cube.R" class="external-link"><code>R/cube.R</code></a></small>
    <div class="hidden name"><code>stack_cube.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a spatiotemporal data cube directly from images with identical spatial extent and spatial reference system, similar
to a raster stack with an additional dimension supporting both, time and multiple bands / variables.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">stack_cube</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">datetime_values</span>,
  bands <span class="op">=</span> <span class="cn">NULL</span>,
  band_names <span class="op">=</span> <span class="cn">NULL</span>,
  chunking <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">256</span>, <span class="fl">256</span><span class="op">)</span>,
  dx <span class="op">=</span> <span class="cn">NULL</span>,
  dy <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>character vector where items point to image files</p></dd>
<dt>datetime_values</dt>
<dd><p>vector of type character, Date, or POSIXct with recording date of images</p></dd>
<dt>bands</dt>
<dd><p>optional character vector defining the band or spectral band of each item in x, if files relate to different spectral bands or variables</p></dd>
<dt>band_names</dt>
<dd><p>name of bands, only used if bands is NULL, i.e., if all files contain the same spectral band(s) / variable(s)</p></dd>
<dt>chunking</dt>
<dd><p>vector of length 3 defining the size of data cube chunks in the order time, y, x.</p></dd>
<dt>dx</dt>
<dd><p>optional target pixel size in x direction, by default (NULL) the original or highest resolution of images is used</p></dd>
<dt>dy</dt>
<dd><p>optional target pixel size in y direction, by default (NULL) the original or highest resolution of images is used</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A proxy data cube object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function creates a four-dimensional (space, time, bands / variables) raster data cube from a 
set of provided files without the need to create an image collection before. This is  possible if all images
have the same spatial extent and spatial reference system and can be used for two different file organizations:</p>
<p>1. If all image files share the same bands / variables, the <code>bands</code> argument can be ignored (default NULL) can 
names of the bands can be specified using the <code>band_names</code> argument.</p>
<p>2. If image files represent different band / variable  (e.g. individual files for red, green, and blue channels), the <code>bands</code>
argument must be used to define the corresponding band / variable. Notice that in this case all files are expected to 
represent exactly one variable / band at one point in datetime. It is not possible to combine files with different
numbers of variables / bands. If image files for different bands have different pixel sizes, the smallest size is used
by default.</p>
<p>Notice that to avoid opening all image files in advance,no automatic check whether all images share the 
spatial extent and spatial reference system is performed.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>This function returns a proxy object, i.e., it will not start any computations besides deriving the shape of the result.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># toy example, repeating the same image as a daily time series</span></span>
<span class="r-in"><span class="va">L8_file_nir</span> <span class="op">&lt;-</span> </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"L8NY18/LC08_L1TP_014032_20181122_20181129_01_T1/LC08_L1TP_014032_20181122_B5.TIF"</span>,</span>
<span class="r-in">            package <span class="op">=</span> <span class="st">"gdalcubes"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">files</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">L8_file_nir</span>, <span class="fl">10</span><span class="op">)</span></span>
<span class="r-in"><span class="va">datetime</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2018-11-22"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span class="r-in"><span class="fu">stack_cube</span><span class="op">(</span><span class="va">files</span>, <span class="va">datetime</span>, band_names <span class="op">=</span> <span class="st">"B05"</span><span class="op">)</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A GDAL data cube proxy object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimensions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          low       high count       pixel_size chunk_size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> t 2018-11-23 2018-12-02    10              P1D          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y    4346085    4582215    78 3027.30769230769        256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x     394185     626415    77 3015.97402597403        256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> t 2018-11-23,2018-11-24,2018-11-25,2018-11-26,2018-11-27,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bands:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name offset scale nodata unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  B05      0     1 -1e+10     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># using a second band from different files</span></span>
<span class="r-in"><span class="va">L8_file_red</span> <span class="op">&lt;-</span> </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"L8NY18/LC08_L1TP_014032_20181122_20181129_01_T1/LC08_L1TP_014032_20181122_B4.TIF"</span>,</span>
<span class="r-in">            package <span class="op">=</span> <span class="st">"gdalcubes"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">files</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">L8_file_nir</span>, <span class="va">L8_file_red</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span class="r-in"><span class="va">datetime</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2018-11-22"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in"><span class="va">bands</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B5"</span>,<span class="st">"B4"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">stack_cube</span><span class="op">(</span><span class="va">files</span>, <span class="va">datetime</span>, bands <span class="op">=</span> <span class="va">bands</span><span class="op">)</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A GDAL data cube proxy object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimensions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          low       high count       pixel_size chunk_size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> t 2018-11-23 2018-12-02    10              P1D          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y    4346085    4582215    78 3027.30769230769        256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x     394185     626415    77 3015.97402597403        256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                       values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> t 2018-11-23,2018-11-24,2018-11-25,2018-11-26,2018-11-27,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bands:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name offset scale nodata unit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   B5      0     1 -1e+10     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   B4      0     1 -1e+10     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marius Appel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

