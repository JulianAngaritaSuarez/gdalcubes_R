<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Apply a moving window function over the time dimension of a data cube — window_time.cube • gdalcubes</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Apply a moving window function over the time dimension of a data cube — window_time.cube" />
<meta property="og:description" content="Create a proxy data cube, which applies one ore more moving window functions to selected bands over pixel time series of a data cube.
The fuction can either use a predefined agggregation function or apply a custom convolution kernel." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gdalcubes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/MODIS.html">1. Processing MODIS data with gdalcubes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/appelmar/gdalcubes_R/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply a moving window function over the time dimension of a data cube</h1>
    <small class="dont-index">Source: <a href='https://github.com/appelmar/gdalcubes_R/blob/master/R/window.R'><code>R/window.R</code></a></small>
    <div class="hidden name"><code>window_time.cube.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a proxy data cube, which applies one ore more moving window functions to selected bands over pixel time series of a data cube.
The fuction can either use a predefined agggregation function or apply a custom convolution kernel.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for cube</span>
<span class='fu'><a href='window_time.html'>window_time</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>expr</span>, <span class='va'>...</span>, <span class='va'>kernel</span>, <span class='va'>window</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>source data cube</p></td>
    </tr>
    <tr>
      <th>expr</th>
      <td><p>either a single string, or a vector of strings defining which reducers wlil be applied over which bands of the input cube</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>optional additional expressions (if expr is not a vector)</p></td>
    </tr>
    <tr>
      <th>kernel</th>
      <td><p>numeric vector with elements of the kernel</p></td>
    </tr>
    <tr>
      <th>window</th>
      <td><p>integer vector with two elements defining the size of the window before and after a cell, the total size of the window is window[1] + 1 + window[2]</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>proxy data cube object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function either applies a kernel convolution (if the <code>kernel</code> argument is provided) or a general reducer function 
over moving temporal windows. In the former case, the kernel convolution will be applied over all bands of the input 
cube, i.e., the output cube will have the same number of bands as the input cubes. If a kernel is given and the <code>window</code> argument is missing, 
the window will be symmetric to the center pixel with the size of the provided kernel. For general reducer functions, the window argument must be provided and
several expressions can be used to create multiple bands in the output cube.</p>
<p>Notice that expressions have a very simple format: the reducer is followed by the name of a band in parantheses. You cannot add
more complex functions or arguments.</p>
<p>Possible reducers currently are "min", "max", "sum", "prod", "count", "mean", "median".</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Implemented reducers will ignore any NAN values (as na.rm=TRUE does).</p>
<p>This function returns a proxy object, i.e., it will not start any computations besides deriving the shape of the result.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># create image collection from example Landsat data only </span>
<span class='co'># if not already done in other examples</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.exists</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"L8.db"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>L8_files</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"L8NY18"</span>, package <span class='op'>=</span> <span class='st'>"gdalcubes"</span><span class='op'>)</span>,
                         <span class='st'>".TIF"</span>, recursive <span class='op'>=</span> <span class='cn'>TRUE</span>, full.names <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
  <span class='fu'><a href='create_image_collection.html'>create_image_collection</a></span><span class='op'>(</span><span class='va'>L8_files</span>, <span class='st'>"L8_L1TP"</span>, <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"L8.db"</span><span class='op'>)</span><span class='op'>)</span> 
<span class='op'>}</span>

<span class='va'>L8.col</span> <span class='op'>=</span> <span class='fu'><a href='image_collection.html'>image_collection</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"L8.db"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>v</span> <span class='op'>=</span> <span class='fu'><a href='cube_view.html'>cube_view</a></span><span class='op'>(</span>extent<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>left<span class='op'>=</span><span class='fl'>388941.2</span>, right<span class='op'>=</span><span class='fl'>766552.4</span>, 
                          bottom<span class='op'>=</span><span class='fl'>4345299</span>, top<span class='op'>=</span><span class='fl'>4744931</span>, t0<span class='op'>=</span><span class='st'>"2018-01"</span>, t1<span class='op'>=</span><span class='st'>"2018-07"</span><span class='op'>)</span>,
                          srs<span class='op'>=</span><span class='st'>"EPSG:32618"</span>, nx <span class='op'>=</span> <span class='fl'>400</span>, dt<span class='op'>=</span><span class='st'>"P1M"</span><span class='op'>)</span>
<span class='va'>L8.cube</span> <span class='op'>=</span> <span class='fu'><a href='raster_cube.html'>raster_cube</a></span><span class='op'>(</span><span class='va'>L8.col</span>, <span class='va'>v</span><span class='op'>)</span> 
<span class='va'>L8.nir</span> <span class='op'>=</span> <span class='fu'><a href='select_bands.html'>select_bands</a></span><span class='op'>(</span><span class='va'>L8.cube</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"B05"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>L8.nir.min</span> <span class='op'>=</span> <span class='fu'><a href='window_time.html'>window_time</a></span><span class='op'>(</span><span class='va'>L8.nir</span>, window <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span>, <span class='st'>"min(B05)"</span><span class='op'>)</span>  
<span class='va'>L8.nir.min</span>
</div><div class='output co'>#&gt; A GDAL data cube proxy object
#&gt; 
#&gt; Dimensions:
#&gt;        low     high count       pixel_size chunk_size
#&gt; t  2018-01  2018-07     7              P1M          1
#&gt; y  4345299  4744931   423 944.756501182033        256
#&gt; x 388941.2 766552.4   400          944.028        256
#&gt; 
#&gt; Bands:
#&gt;      name offset scale nodata unit
#&gt; 1 B05_min      0     1    NaN     
#&gt; </div><div class='input'>
<span class='va'>L8.nir.kernel</span> <span class='op'>=</span> <span class='fu'><a href='window_time.html'>window_time</a></span><span class='op'>(</span><span class='va'>L8.nir</span>, kernel<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, window<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>  
<span class='va'>L8.nir.kernel</span>
</div><div class='output co'>#&gt; A GDAL data cube proxy object
#&gt; 
#&gt; Dimensions:
#&gt;        low     high count       pixel_size chunk_size
#&gt; t  2018-01  2018-07     7              P1M          1
#&gt; y  4345299  4744931   423 944.756501182033        256
#&gt; x 388941.2 766552.4   400          944.028        256
#&gt; 
#&gt; Bands:
#&gt;   name offset scale nodata unit
#&gt; 1  B05      0     1    NaN     
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marius Appel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


